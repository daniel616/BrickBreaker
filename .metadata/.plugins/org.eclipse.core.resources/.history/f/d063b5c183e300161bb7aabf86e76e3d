package application;

import java.util.ArrayList;

import javafx.scene.Group;
import javafx.scene.image.ImageView;

public abstract class Touchable {
	private ImageView mySprite;
	private ArrayList<Touchable> list;
	protected double xVelocity;
	protected double yVelocity;
	
	public Touchable(ImageView sprite, ArrayList<Touchable> list){
		mySprite=sprite;
		this.list=list;
	}
	
	public ImageView getSprite(){
		return mySprite;
	}
	
	public void move(double elapsedTime){
		mySprite.setX(mySprite.getX()+xVelocity*elapsedTime);
		mySprite.setY(mySprite.getY()+yVelocity*elapsedTime);
	}
	
	public void destroyThis(){
		Group g=(Group)mySprite.getParent();
		g.getChildren().remove(mySprite);
		list.remove(this);
	}
	
	private boolean collided(Touchable other){
    	//this kind of collision only works if things don't move by a lot per frame.
    	double myWidth=mySprite.getFitWidth();
		double myHeight=mySprite.getFitHeight();
		double centeredX=mySprite.getX()+myWidth/2;
		double centeredY=mySprite.getY()+myHeight/2;
		
		double otherWidth=other.getSprite().getFitWidth();
		double otherHeight=other.getSprite().getFitHeight();
		double otherCenteredX=other.getSprite().getX()+otherWidth/2;
		double otherCenteredY=other.getSprite().getY()+otherHeight/2;
		
		if(Math.abs(centeredX-otherCenteredY)<(myWidth+otherWidth)/2
				&&Math.abs(centeredY-otherCenteredY)<(myHeight+otherHeight)/2){		
			return true;
		}
		return false;   	   	
    }
	

}
