package application;

import java.util.ArrayList;
import javafx.scene.Group;
import javafx.scene.image.ImageView;

/*
 * Touchables are essentially a collection of variables attached to ImageViews that can tell when they are touching other Touchables.
 * Movement is based off velocity- various environmental factors adjust the velocity of the touchable, 
 * which decides where it will move next.
 * I think this code is well designed because it implements basic functionalities that are useful for my Brick, Bouncer and PowerUp classes.
 * In particular, the Touchable could save code by eliminating some of the duplicated code needed to 
 * This and the bouncer are my "Masterpieces".
 */

public abstract class Touchable {	
	private ImageView mySprite;
	private double xVelocity;
	private double yVelocity;
	
	public Touchable(ImageView sprite){
		mySprite=sprite;
	}
	
	public Touchable(ImageView sprite,double xVelocity, double yVelocity){
		this(sprite);
		this.xVelocity=xVelocity;
		this.yVelocity=yVelocity;
	}
	
	public ImageView getSprite(){
		return mySprite;
	}
	
	public double xVelocity(){
		return xVelocity;
	}
	
	public double yVelocity(){
		return yVelocity;
	}
	
	public void setVelocity(double x, double y){
		xVelocity=x;
		yVelocity=y;
	}
	
	public void move(double elapsedTime){
		//All Touchables should use this for their animations.
		mySprite.setX(mySprite.getX()+xVelocity*elapsedTime);
		mySprite.setY(mySprite.getY()+yVelocity*elapsedTime);
	}
	
	protected boolean isTouching(Touchable other){
		//Finds the coordinates of the centers of the ImageViews of two Touchables.
		//If they are close enough so that the ImageViews overlap, returns true.
    	//this kind of collision only works if things don't move by a lot per frame.
    	double myWidth=mySprite.getFitWidth();
		double myHeight=mySprite.getFitHeight();
		double centeredX=mySprite.getX()+myWidth/2;
		double centeredY=mySprite.getY()+myHeight/2;
		
		double otherWidth=other.getSprite().getFitWidth();
		double otherHeight=other.getSprite().getFitHeight();
		double otherCenteredX=other.getSprite().getX()+otherWidth/2;
		double otherCenteredY=other.getSprite().getY()+otherHeight/2;
		
		if(Math.abs(centeredX-otherCenteredY)<(myWidth+otherWidth)/2
				&&Math.abs(centeredY-otherCenteredY)<(myHeight+otherHeight)/2){		
			return true;
		}
		return false;   	   	
    }
}
